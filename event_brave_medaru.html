<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>勇猛のメダル交換表</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css">
    <!-- <link rel="stylesheet" href="normalize.css"> -->
    <!-- アイコンフォントの利用方法 http://fortawesome.github.io/Font-Awesome/ -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <!-- <link rel="stylesheet" href="font-awesome.min.css"> -->
    <link rel="stylesheet" href="Lineage_main.css">
  </head>
  <style>
  .modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0; top: 0;
  width: 100%; height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.5);
}

.modal-content {
  background-color: #fdfdf0;
  margin: 5% auto;
  padding: 1em;
  border: 1px solid #888;
  width: 780px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 0 10px #333;
}

.close-button {
  float: right;
  font-size: 1.5em;
  cursor: pointer;
}
</style>
<body id="top">
  <div class="nav">
    <ul class="nav-group">
      <li><a href="index.html"><i class="fa fa-home"></i>&nbsp;ホーム</a></li>
      <li><a href="Lineage_table_monster.html">Monsters</a></li>
      <li><a href="Lineage_table_drop.html">Drops</a></li>
      <li><a href="Lineage_table_skill.html">Skills</a></li>
      <li><a href="LineageREMASTER_IME.html">IME</a></li>
      <li><a href="LineageREMASTER_ATOK.html">ATOK</a></li>
      <li><a href="LineageREMASTER_etc.html" class="active">諸表</a></li>
      <li><a href="font.html">大字</a></li>
      <li><a href="inkey_JAJP.html">押下釦</a></li>
        <li><a href="updates.html">変更歴</a></li>    </ul>
  </div>
  <div class="main">リネージュメモ</div> <!-- サイト共通のmain title 帯 -->
  <div class="header"> <!-- サイト共通のheaderエリア -->
    <h1 class="header-title">勇猛のメダル交換表</h1>
    <div class="header-description"> <!-- サイト共通のheader説明文エリア -->
    UBや極寒の神殿、ユニコーンテンプルクリアで獲得できる勇猛のメダルを各種アイテムと交換できます。
    </div> <!-- サイト共通のheader説明文エリア -->
  </div> <!-- サイト共通のheaderエリア -->
  <div class="table_lead"> <!-- テーブル中心ページのテーブル説明文エリア -->
    <span class="lead_text">2025年9月17日(水)定期メンテナンス後～2025年12月24日(水)定期メンテナンス前</span>
    <span class="update_date"><i class="fa fa-clock-o">更新</i>&nbsp;2025/9/17</span>
  </div>
  <div class="table_box_acce">
    <div class="content">
      <div id="article">
        <div class="article-date"><i class="fa fa-clock-o"></i>&nbsp;2025年09月17日</div>
        <div class="article-paragraph"> <!-- table_box_acce 表示制御セレクター名 -->
          <h3 class="article-paragraph-title">■勇猛のメダル交換人バルーガリスト(通貨:勇猛のメダル)</h3>
          <div class="table_lead"><span class="lead_text">※　アイテム削除日は2025年12月24日(水)定期メンテナンス前となります。</span><span class="create_date">作成日:2025.9.17</span></div>
          <table class="smalltable">
            <thead>
              <tr>
                <th class="noborder"></th>
                <th class="item_name">交換アイテム</th>
                <th class="quantity">枚数</th>
                <th class="Restriction">制限事項</th>
                <th class="description">アイテム説明</th>
              </tr>
            </thead>
            <tbody>
              <tr><td class="noborder"></td><td class="item_name">古いバルーガのベルト</td><td class="quantity">200枚</td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder"></td><td class="item_name">+0バルーガのゲートル</td><td class="quantity">100枚</td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder"></td><td class="item_name">体力の加護の結晶体</td><td class="quantity">50枚</td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">英雄の武器精錬石箱</td><td class="quantity">50枚</td><td class="Restriction">アカウントあたり週5回まで</td><td class="description">精錬石(武器)は1段階～5段階のグレードが存在し、合成により一定確率で精錬石のグレードを上昇させることができます。</td></tr>
            </tbody>
          </table>

          <h3 class="article-paragraph-title">■勇猛のメダル製作ワルーガリスト(通貨:勇猛のメダル)</h3>
          <div class="table_lead"><span class="lead_text">確定製作<br>※　アイテム削除日は2025年12月24日(水)定期メンテナンス前となります。	</span><span class="create_date"><br>作成日:2025.9.17</span></div>
          <table class="smalltable">
            <thead>
              <tr><th class="noborder"></th><th class="item_name">製作アイテム</th><th class="quantity">枚数</th><th class="Restriction">製作条件</th><th class="description">アイテム説明</th></tr>
            </thead>
            <tbody>
              <tr><td class="noborder">★</td><td class="item_name">職人の防具強化スクロール</td><td class="quantity">500枚</td><td class="Restriction">	確率製作10％</td><td class="description"></td></tr>
          <tr><td class="noborder">★</td><td class="item_name">パンドラの保護強化スクロール</td><td class="quantity">100枚</td><td class="Restriction">アカウントあたり5回まで	</td><td class="description"></td></tr>
          <tr><td class="noborder">★</td><td class="item_name">潜在力強化の秘薬</td><td class="quantity">100枚</td><td class="Restriction">アカウントあたり5回まで	</td><td class="description"></td></tr>
          <tr><td class="noborder"></td><td class="item_name">上級スキル選択ボックス(刻印)　※</td><td class="quantity">600枚</td><td class="Restriction">右のいずれか1つを獲得</td><td class="description">技術書(レイジング フォース)(刻印)<br>
          技術書(ブロー アタック)(刻印)<br>
          技術書(カウンター バリア)(刻印)<br>
          ウォリアーの印章(タイタン ライジング)(刻印)<br>
          フェンサーの書(インフィニティ：ドッジ)(刻印)<br>
          闇精霊の水晶(シャドウ ステップ)(刻印)<br>
          精霊の水晶(ハリケーン)(刻印)<br>
          ドラゴンナイトの書板(サンダー グラップ：ブレイブ)(刻印)</td></tr>
          <tr><td class="noborder"></td><td class="item_name">補給スキル選択ボックス(刻印) (君主)　※</td><td class="quantity">100枚</td><td class="Restriction"></td><td class="description">魔法書(シャイニング アーマー)(刻印)</td></tr>
          <tr><td class="noborder"></td><td class="item_name">補給スキル選択ボックス(刻印) (ナイト)　※</td><td class="quantity">100枚</td><td class="Restriction">右のいずれか1つを獲得	</td><td class="description">技術書(リダクション アーマー)(刻印)<br>
                  技術書(ソリッド キャリッジ)(刻印)<br>
                  技術書(ショック スタン)(刻印)</td></tr>
          <tr><td class="noborder"></td><td class="item_name">補給スキル選択ボックス(刻印) (エルフ)　※</td><td class="quantity">100枚</td><td class="Restriction">右のいずれか1つを獲得</td><td class="description">精霊の水晶(イレース マジック)(刻印)<br>
                  精霊の水晶(エリア サイレンス)(刻印)<br>
                  精霊の水晶(エルヴン グラヴィティー)(刻印)<br>
                  精霊の水晶(ダンシング ブレイズ)(刻印)<br>
                  精霊の水晶(ウォーター ライフ)(刻印)<br>
                  精霊の水晶(アクア プロテクター)(刻印)<br>
                  精霊の水晶(ネイチャーズ ブレッシング)(刻印)<br>
                  精霊の水晶(ポルート ウォーター)(刻印)<br>
                  精霊の水晶(アース ガーディアン)(刻印)<br>
                  精霊の水晶(エキゾチック バイタライズ)(刻印)<br>
                  精霊の水晶(クエイク)(刻印)<br>
                  精霊の水晶(アース バインド)(刻印)<br>
                  精霊の水晶(イーグル アイ)(刻印)<br>
                  精霊の水晶(サイクロン)(刻印)<br>
                  精霊の水晶(ストライカー ゲイル)(刻印)</td></tr>
          <tr><td class="noborder"></td><td class="item_name">補給スキル選択ボックス(刻印) (ウィザード)　※</td><td class="quantity">100枚</td><td class="Restriction">右のいずれか1つを獲得</td><td class="description">魔法書(カウンター マジック)(刻印)<br>
                  魔法書(キャンセレーション)(刻印)<br>
                  魔法書(イラプション)(刻印)<br>
                  魔法書(サン バースト)(刻印)<br>
                  魔法書(サモン モンスター)(刻印)<br>
                  魔法書(フル ヒール)(刻印)<br>
                  魔法書(インビジビリティ)(刻印)<br>
                  魔法書(ブリザード)(刻印)<br>
                  魔法書(リザレクション)(刻印)<br>
                  魔法書(サイレンス)(刻印)<br>
                  魔法書(マス テレポート)(刻印)<br>
                  魔法書(ファイアー ストーム)(刻印)<br>
                  魔法書(グレーター リザレクション)(刻印)<br>
                  魔法書(アブソルートバリア)(刻印)<br>
                  魔法書(アイス スパイク)(刻印)</td></tr>
              <tr><td class="noborder"></td><td class="item_name">補給スキル選択ボックス(刻印)(ウォリアー)　※</td><td class="quantity">100枚</td><td class="Restriction"></td><td class="description">ウォリアーの印章(パワー グリップ)(刻印)</td></tr>
              <tr><td class="noborder"></td><td class="item_name">補給スキル選択ボックス(刻印)(ドラゴンナイト)　※</td><td class="quantity">100枚</td><td class="Restriction">右のいずれか1つを獲得</td><td class="description">ドラゴンナイトの書板(覚醒：アンタラス)(刻印)<br>
                  ドラゴンナイトの書板(マグマ ブレス)(刻印)<br>
                  ドラゴンナイトの書板(覚醒：パプリオン)(刻印)<br>
                  ドラゴンナイトの書板(マグマ アロー)(刻印)<br>
                  ドラゴンナイトの書板(サンダー グラップ)(刻印)<br>
                  ドラゴンナイトの書板(デストロイ：ホラー)(刻印)</td></tr>
              <tr><td class="noborder"></td><td class="item_name">補給スキル選択ボックス(刻印) (フェンサー)　※</td><td class="quantity">100枚</td><td class="Restriction">右のいずれか1つを獲得</td><td class="description">フェンサーの書(ブレード)(刻印)<br>
                  フェンサーの書(ヘルファイア)(刻印)<br>
                  フェンサーの書(パンテラ)(刻印)</td></tr>
              <tr><td class="noborder"></td><td class="item_name">補給スキル選択ボックス(刻印) (ダークエルフ)　※</td><td class="quantity">100枚</td><td class="Restriction">右のいずれか1つを獲得</td><td class="description">闇精霊の水晶(ドレス マイティー)(刻印)<br>
                  闇精霊の水晶(ブラインド ハイディング)(刻印)<br>
                  闇精霊の水晶(エンチャント ベノム)(刻印)<br>
                  闇精霊の水晶(バーニング スピリッツ)(刻印)<br>
                  闇精霊の水晶(シャドウ スリープ)(刻印)<br>
                  闇精霊の水晶(ベノム レジスト)(刻印)<br>
                  闇精霊の水晶(ドレス デクスタリティー)(刻印)<br>
                  闇精霊の水晶(ファイナル バーン)(刻印)<br>
                  闇精霊の水晶(ドレス イベイジョン)(刻印)<br>
                  闇精霊の水晶(ルシファー)(刻印)</td></tr>
              <tr><td class="noborder"></td><td class="item_name">補給スキル選択ボックス(刻印) (イリュージョニスト)　※</td><td class="quantity">100枚</td><td class="Restriction">右のいずれか1つを獲得</td><td class="description">記憶の水晶(マインド ブレイク)(刻印)<br>
                  記憶の水晶(キューブ[ゴーレム])(刻印)<br>
                  記憶の水晶(ファンタズム)(刻印)<br>
                  記憶の水晶(イリュージョン[ゴーレム])(刻印)<br>
                  記憶の水晶(インサイト)(刻印)<br>
                  記憶の水晶(パニック)(刻印)<br>
                  記憶の水晶(リデュース ウェイト)(刻印)</td></tr>
              <tr><td class="noborder">★</td><td class="item_name">魔法書(グレイス)(刻印)</td><td class="quantity">1,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">魔法書(マジェスティ)(刻印)</td><td class="quantity">3000枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">技術書(アブソルート ブレイド)(刻印)</td><td class="quantity">600枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">技術書(リダクション アーマー：ベテラン)(刻印)</td><td class="quantity">1,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">技術書(エクセレント ソード)(刻印)</td><td class="quantity">4,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">精霊の水晶(ソウル バリア)(刻印)</td><td class="quantity">600枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">精霊の水晶(マジック シールド)(刻印)</td><td class="quantity">1,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">魔法書(デス ヒール)(刻印)</td><td class="quantity">1,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">魔法書(メテオ ストライク)(刻印)</td><td class="quantity">4,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">闇精霊の水晶(ダブル ブレイク：デスティニー)(刻印)</td><td class="quantity">1,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">闇精霊の水晶(アーマー ブレイク)(刻印)</td><td class="quantity">4,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">ドラゴンナイトの書板(アウラキア)(刻印)</td><td class="quantity">1,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">ドラゴンナイトの書板(ランページ)(刻印)</td><td class="quantity">4,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">記憶の水晶(メビウス)(刻印)</td><td class="quantity">1,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">記憶の水晶(インパクト)(刻印)</td><td class="quantity">4,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">ウォリアーの印章(タイタン ロック)(刻印)</td><td class="quantity">1,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">ウォリアーの印章(タイタン ブリッツ)(刻印)</td><td class="quantity">3000枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">フェンサーの書(サヴァイヴ)(刻印)</td><td class="quantity">1,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">フェンサーの書(インフィニティ：ブリッツ)(刻印)</td><td class="quantity">1,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">フェンサーの書(パラドックス)(刻印)</td><td class="quantity">4,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">槍術書(プレッシャー)(刻印)</td><td class="quantity">1,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">槍術書(ヴァンガード)(刻印)</td><td class="quantity">4,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">槍術書(ドッジ ブレイク)(刻印)</td><td class="quantity">3000枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">聖書(ディバイン ソウル：グレイス)(刻印)</td><td class="quantity">1,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>
              <tr><td class="noborder">★</td><td class="item_name">聖書(ホーリー チャージ)(刻印)</td><td class="quantity">4,500枚 </td><td class="Restriction"></td><td class="description"></td></tr>              <tr><td class="noborder"></td><td class="item_name">バルーガのベルト</td><td class="quantity">400枚</td><td class="Restriction"></td><td class="description">古いバルーガのベルト</td></tr>
              <tr><td class="noborder"></td><td class="item_name">輝くバルーガのベルト</td><td class="quantity">400枚</td><td class="Restriction"></td><td class="description">バルーガのベルト</td></tr>
              <tr><td class="noborder"></td><td class="item_name">+1 バルーガのゲートル</td><td class="quantity">50枚</td><td class="Restriction"></td><td class="description">バルーガのゲートル</td></tr>
              <tr><td class="noborder"></td><td class="item_name">+2 バルーガのゲートル</td><td class="quantity">100枚</td><td class="Restriction"></td><td class="description">+1 バルーガのゲートル	</td></tr>
              <tr><td class="noborder"></td><td class="item_name">+3 バルーガのゲートル</td><td class="quantity">150枚</td><td class="Restriction"></td><td class="description">+2 バルーガのゲートル	</td></tr>
              <tr><td class="noborder"></td><td class="item_name">+4 バルーガのゲートル</td><td class="quantity">200枚</td><td class="Restriction"></td><td class="description">+3 バルーガのゲートル	</td></tr>
              <tr><td class="noborder"></td><td class="item_name">+5 バルーガのゲートル</td><td class="quantity">300枚</td><td class="Restriction"></td><td class="description">+4 バルーガのゲートル	</td></tr>
            </tbody>
          </table>
          <!-- <h3 class="article-paragraph-title">■	前々回(2025/2～)実施の以下のスキルの交換は今回はありません。</h3>
          <p>魔法書(グレイス)(刻印)(1,500枚)、魔法書(マジェスティ)(刻印)(3000枚)、技術書(アブソルート ブレイド)(刻印)(600枚)、技術書(リダクション アーマー：ベテラン)(刻印)(1,500枚)、技術書(エクセレント ソード)(刻印)(4,500枚)、精霊の水晶(ソウル バリア)(刻印)(600枚)、精霊の水晶(マジック シールド)(刻印)(1,500枚)、魔法書(デス ヒール)(刻印)(1,500枚)、魔法書(メテオ ストライク)(刻印)(4,500枚)、闇精霊の水晶(ダブル ブレイク：デスティニー)(刻印)(1,500枚)、闇精霊の水晶(アーマー ブレイク)(刻印)(4,500枚)、ドラゴンナイトの書板(アウラキア)(刻印)(1,500枚)、ドラゴンナイトの書板(ランページ)(刻印)(4,500枚)、記憶の水晶(メビウス)(刻印)(1,500枚)、記憶の水晶(インパクト)(刻印)(4,500枚)、ウォリアーの印章(タイタン ロック)(刻印)(1,500枚)、ウォリアーの印章(タイタン ブリッツ)(刻印)(3000枚)、フェンサーの書(サヴァイヴ)(刻印)(1,500枚)、フェンサーの書(インフィニティ：ブリッツ)(刻印)(1,500枚)、フェンサーの書(パラドックス)(刻印)(4,500枚)、槍術書(プレッシャー)(刻印)(1,500枚)、槍術書(ヴァンガード)(刻印)(4,500枚)、槍術書(ドッジ ブレイク)(刻印)(3000枚)、聖書(ディバイン ソウル：グレイス)(刻印)(1,500枚)、聖書(ホーリー チャージ)(刻印)(4,500枚)</p> -->
          終わり
        </div> <!-- article-paragraph -->
      </div> <!-- article -->
    </div> <!-- content -->
  </div> <!-- table_box_acce -->			
  <div class="address">
    <div class="address-body"><strong class="address-body-name"></strong>
        <div class="address-body-addressline"></div>
        <!-- <strong class="address-body-tel"><i class="fa fa-phone"></i></strong> -->
    </div> <!-- address-body -->
  </div> <!-- address -->
  <div class="footer">
    <div class="footer-text">当サイトで使用されているリネージュの画像・BGM及びその他の表現物の権利は下記のとおり権利者に帰属します：<br>
    &copy; NCSOFT Corporation. Licensed to NC Japan K.K. All Rights Reserved.</div>
    <div class="footer-copyright">Copyright &copy; 2024 asamon.</div>
  </div> <!-- footer -->
  <div><a href="#top" class="btn-pagetop"><i class="fa fa-arrow-up"></i></a></div>

<script>
// 変数規定部（CONFIGオブジェクトのプロパティとして。必要に応じて変更。）
const CONFIG = {
 //tsvファイル指定
  tsvPath: 'LineageREMASTER_skill3.tsv',
 //tsvフィールド数(カラム数)
  expectedFieldCount: 25,
 // フィールド格納割り当て
  fieldNames: [
    'no', 'img', 'level', 'name', 'cls', 'elf', 'active', 'type', 'align', 'mp', 'hp',
    'material', 'gear', 'duration', 'target', 'reuse', 'effect', 'acqLv', 'obtain',
    'price', 'Droporigin', 'Dropcomp', 'note1', 'note2', 'eor'
  ],
 //本文探索語句フィールド名
  linkField: 'name',
 //探索対象div ID指定
  articleSelector: '#article',
 // モーダル構成(html末尾)div ID指定(recordModal_1…,recordDetailContainer_1…)
  modalSelector: '#recordModal_1',
  containerSelector: '#recordDetailContainer_1', 
  closeButtonSelector: '.close-button'
};
console.log(CONFIG);
// データ保持用
let recordList = [];

// TSV読み込みとリンク化処理
fetch(CONFIG.tsvPath)
  .then(response => response.text())
  .then(text => {
    const lines = text.trim().split('\n');
    for (const line of lines) {
      const fields = line.split('\t');
      if (fields.length < CONFIG.expectedFieldCount) continue;

      const record = {};
      CONFIG.fieldNames.forEach((name, i) => {
        record[name] = fields[i] || '';
      });
      recordList.push(record);
    }
// 語句リンク化
    const article = document.querySelector(CONFIG.articleSelector);
console.log(CONFIG.articleSelector);
console.log(document.querySelector(CONFIG.articleSelector));
console.log(article);
    article.innerHTML = autoLink(article.innerHTML, recordList, CONFIG.linkField);
  });

// 語句自動リンク関数
function autoLink(text, dataList, keyField) {
  const phrases = dataList
    .map(item => `(${item[keyField]})`)
    .sort((a, b) => b.length - a.length);

  for (const phrase of phrases) {
    const escaped = phrase.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    const regex = new RegExp(escaped, 'g');
    const plain = phrase.replace(/^\(|\)$/g, '');
    text = text.replace(regex, `<a href="#" class="record-link" data-key="${plain}" title="クリックで詳細表示">${phrase}</a>`);
  }

  return text;
}

// モーダル表示関数
function showModal(record, generateHTML) {
  const modal = document.querySelector(CONFIG.modalSelector);
  const container = document.querySelector(CONFIG.containerSelector);
  const closeBtn = document.querySelector(CONFIG.closeButtonSelector);

  container.innerHTML = generateHTML(record);
  modal.style.display = 'block';

  closeBtn.onclick = () => modal.style.display = 'none';
  window.onclick = (event) => {
    if (event.target === modal) modal.style.display = 'none';
  };
}

// SubHTMLのスタイルとタグを記述する。↓はskill一覧表依存、適宜変更する。
// HTML生成関数（スキル用テンプレート）
function generateSubHTML(tsvRecord) {
  let clsDisplay = tsvRecord.cls;
  if (tsvRecord.cls === "妖" && tsvRecord.elf) {
    clsDisplay += `（${tsvRecord.elf}）`;
  }
  let popup_html =`
  <html><head>
    <link rel="stylesheet" href="Lineage_skill.css">
    <title>${tsvRecord.name}</title>
      <style>
  body {
    font-family: 'メイリオ', Meiryo, 'ヒラギノ角ゴ Pro W3', 'Hiragino Kaku Gothic Pro', Helvetica, Arial, 'ＭＳ Ｐゴシック', sans-serif;
<!--      font-family: 'Segoe UI', sans-serif; -->
    padding: 1em;
    background-color: #fdfdf0;
    color: #333;
  }
  h2 {
    color: #0066cc;
    border-bottom: 2px solid #ccc;
    padding-bottom: 4px;
  }
  table {
    border-collapse: collapse;
    width: auto;
    margin-top: 0.9em;
  }
  th, td {
    border: 1px solid #ccc;
    padding: 2px 4px 2px 4px;
    vertical-align: top;
  }`
// モーダル指定によるstyleのケース分け(クラス名を増やしたくない時)
if (CONFIG.modalSelector==='#recordModal_1'){
    popup_html +=`
    th.col-header {
      text-align: center;
      background-color: #d8d8d8;
    }`
  } else {
    popup_html +=`
    th.col-header {
      text-align: center;
      background-color: #68a8a8;
    }`
  };
popup_html +=`
  td {
    text-align: left;
  }
  </style>
  </head><body>
  <table>`
popup_html += `<tbody id="(${tsvRecord.name})" class="record-table" data-cls=${tsvRecord.cls} data-elf=${tsvRecord.elf}>`;
// No.とLevelとスキル名は「<th>～」を使用しない。1+1+9=11列。
  popup_html += `<tr class="record-title">
              <td class="col-data_no">No.${tsvRecord.no}</td>`
  // ...existing code...
  // 等級・スキルレベルの出力部分
              if (/^\d+$/.test(tsvRecord.level)) {
      // 数字のみの場合
                  popup_html += `<td class="col-data_level">Lv.${tsvRecord.level}</td>`;
              } else {
      // 空または文字列（神話・伝説など）の場合
                  popup_html += `<td class="col-data_level">${tsvRecord.level}</td>`;
              }   
      popup_html += `<td class="col-data_skillname" colspan="9">${tsvRecord.name}</td>
          </tr>`
// skill_domain_eligible_character:5列
// skill_domain_tendency:2+2+2=6列
  popup_html += `<tr>
              <th class="col-header">職業</th><td class="col-data" colspan="4">${clsDisplay}</td>`
  popup_html += `<th class="col-header">活性</th><td class="col-data">${tsvRecord.active}</td>
              <th class="col-header">種類</th><td class="col-data">${tsvRecord.type}</td>
              <th class="col-header">性向</th><td class="col-data">${tsvRecord.align}</td>
          </tr>`
// skill_domain_resource:2+2+3+2+2=11列
  popup_html += `<tr>
              <th class="col-header">MP</th><td class="col-data">${tsvRecord.mp}</td>
              <th class="col-header">HP</th><td class="col-data">${tsvRecord.hp}</td>
              <th class="col-header">材料</th><td class="col-data" colspan="2">${tsvRecord.material}</td>
              <th class="col-header">装備</th><td class="col-data">${tsvRecord.gear}</td>
              <th class="col-header">持続</th><td class="col-data">${tsvRecord.duration}</td>
          </tr>`
// skill_domain_effect:3+2+6=11列
  popup_html += `<tr>
              <th class="col-header">対象</th><td class="col-data" colspan="2">${tsvRecord.target}</td>
              <th class="col-header">間隔</th><td class="col-data">${tsvRecord.reuse}</td>
              <th class="col-header">効果</th><td class="col-data" colspan="5">${tsvRecord.effect}</td>
          </tr>`
// skill_domain_acquisition:2+3+6=11列
  popup_html += `<tr>
              <th class="col-header">習得</th><td class="col-data">${tsvRecord.acqLv}</td>
              <th class="col-header">入手</th><td class="col-data" colspan="2">${tsvRecord.obtain}</td>
              <th class="col-header">価格</th><td class="col-data" colspan="5">${tsvRecord.price}</td>
          </tr>`
// skill_domain_dropmob:11列
  popup_html += `<tr>
              <th class="col-header">Drop</th><td class="col-data" colspan="11">${tsvRecord.Droporigin}</td>
          </tr>`
// skill_domain_dropmob:11列
  popup_html += `<tr>
              <th class="col-header">蘇生</th><td class="col-data" colspan="11">${tsvRecord.Dropcomp}</td>
          </tr>`
// skill_domain_notes:6+5=11列
  popup_html += `<tr>
              <th class="col-header">備考1</th><td class="col-data" colspan="5">${tsvRecord.note1}</td>
              <th class="col-header">備考2</th><td class="col-data" colspan="4">${tsvRecord.note2}</td>
          </tr>`
// ↑ skillDeta依存。適宜変更する。
// LiveServer script code inject対策。
popup_html += `</table></bo`;  // タグbodyやhtmlの出現がキー
popup_html += `dy></ht`;       // タグbodyやhtmlの出現がキー
popup_html += `ml>`;           // タグbodyやhtmlの出現がキー
  return popup_html;
}

// リンククリックイベント
document.addEventListener('click', (e) => {
  if (e.target.classList.contains('record-link')) {
    e.preventDefault();
    const key = e.target.dataset.key;
    const record = recordList.find(r => r[CONFIG.linkField] === key);
    if (!record) {
      alert(`「${key}」が見つかりませんでした`);
      return;
    }
    showModal(record, generateSubHTML);
  }
});
</script>
<!-- ↓モーダル1 -->
<div id="recordModal_1" class="modal">
  <div class="modal-content">
    <span class="close-button">&times;</span>
    <div id="recordDetailContainer_1"></div>
  </div>
</div>
<!-- ↑モーダル1 -->
<!-- ↓モーダル2 -->
<div id="recordModal_2" class="modal">
  <div class="modal-content">
    <span class="close-button">&times;</span>
    <div id="recordDetailContainer_2"></div>
  </div>
</div>
<!-- ↑モーダル2 -->
</body>
</html>