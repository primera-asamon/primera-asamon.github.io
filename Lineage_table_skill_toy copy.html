<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <title>ãƒªãƒãƒ¼ã‚¸ãƒ¥ãƒªãƒã‚¹ã‚¿ãƒ¼ãƒ»ã‚¹ã‚­ãƒ«ä¸€è¦§</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css">
    <!-- <link rel="stylesheet" href="normalize.css"> -->
    <!-- ã‚¢ã‚¤ã‚³ãƒ³ãƒ•ã‚©ãƒ³ãƒˆã®åˆ©ç”¨æ–¹æ³• http://fortawesome.github.io/Font-Awesome/ -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <!-- <link rel="stylesheet" href="font-awesome.min.css"> -->
    <link rel="stylesheet" href="Lineage_main.css">
    <!-- <script src="jquery.min.js"></script> -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Lineage_main.css">
    <link rel="stylesheet" href="Lineage_skill.css">
</head>
<body id="top">
    <div class="nav">
        <ul class="nav-group">
            <li><a href="index.html">ãƒ›ãƒ¼ãƒ </a><i class="fa fa-home"></i></li>
            <li><a href="Lineage_table_monster.html">Monsters</a></li>
            <li><a href="Lineage_table_drop.html">Drops</a></li>
            <li><a href="Lineage_table_skill.html" class="active">&nbsp;Skills</a></li>
            <li><a href="LineageREMASTER_IME.html">IME</a></li>
            <li><a href="LineageREMASTER_ATOK.html">ATOK</a></li>
            <li><a href="LineageREMASTER_etc.html">è«¸è¡¨</a></li>
            <li><a href="font.html">å¤§å­—</a></li>
            <li><a href="inkey_JAJP.html">æŠ¼ä¸‹é‡¦</a></li>
        </ul>
    </div>
<!-- ãƒšãƒ¼ã‚¸å†’é ­ã«éè¡¨ç¤ºã§èª­ã¿ä¸Šã’å¯¾å¿œã®å›½éš›åŒ–ãƒ»èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆ -->
    <p id="screenreader-info" lang="en">
        This page lists MMORPG skills for Japanese-speaking players. It does not contain navigation or language switching. If you are using a screen reader or are not fluent in Japanese, please note that this page is for reference only and may not offer interactive support.
    </p>
<!-- æ—¥æœ¬èªã§ã®ãƒšãƒ¼ã‚¸èª¬æ˜ï¼ˆè¦–èªè¡¨ç¤ºå¯ï¼‰ -->
    <p id="screenreader-info_jp" class="page-description">
        ã“ã®ãƒšãƒ¼ã‚¸ã¯æ—¥æœ¬èªè©±è€…å‘ã‘ã«è¨­è¨ˆã•ã‚ŒãŸMMORPGã‚¹ã‚­ãƒ«ã®ä¸€è¦§è¡¨ã§ã™ã€‚ãƒªãƒ³ã‚¯ã‚„ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã¯è¨­ã‘ã¦ãŠã‚‰ãšã€ãƒšãƒ¼ã‚¸å…¨ä½“ã®å†…å®¹ã‚’1ãƒšãƒ¼ã‚¸ã§å®Œçµã™ã‚‹æ§‹æˆã«ãªã£ã¦ã„ã¾ã™ã€‚å†…å®¹ã®æŠŠæ¡ã‚’ä¸»ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚
    </p>
<!-- æŠ€è¡“ãƒ»é­”æ³•ä¸€è¦§ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ(æ—§ä»•æ§˜)â€»ã‚¹ãƒãƒ›ã§ã¯å–å¾—ã§ããªã„ã‹ã‚‰ 
 <input type="file" id="fileInput">
-->
<!-- æŠ€è¡“ãƒ»é­”æ³•ä¸€è¦§ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ(å‰ä»•æ§˜)â€»ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã®ãƒšãƒ¼ã‚¹ãƒˆ(é•·å¤§ãªãƒ‡ãƒ¼ã‚¿ã§ã¯ä¸é©å½“) -->
<!-- <button id="submitBtn">è¡¨ç¤º</button>
     <div id="output"></div>
-->
<!-- æŠ€è¡“ãƒ»é­”æ³•ä¸€è¦§ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ(æ–°ä»•æ§˜)â€»ãƒ•ã‚¡ã‚¤ãƒ«åã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° -->
    <button id="loadBtn">è¡¨ç¤º</button>
<!-- HTMLï¼ˆãƒœã‚¿ãƒ³ã‚„ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã‚’è¿½åŠ ï¼‰ -->
    <div id="classFilterBtns" style="margin-bottom: 15px;">
        <button class="class-btn" data-cls="all">all</button>
        <button class="class-btn" data-cls="å›">å›</button>
        <button class="class-btn" data-cls="é¨">é¨</button>
        <button class="class-btn" data-cls="å¦–" data-elf="ç«">ç«</button>
        <button class="class-btn" data-cls="å¦–" data-elf="æ°´">æ°´</button>
        <button class="class-btn" data-cls="å¦–" data-elf="é¢¨">é¢¨</button>
        <button class="class-btn" data-cls="å¦–" data-elf="åœ°">åœ°</button>
        <button class="class-btn" data-cls="é­”">é­”</button><br>
        <button class="class-btn" data-cls="é—‡">é—‡</button>
        <button class="class-btn" data-cls="ç«œ">ç«œ</button>
        <button class="class-btn" data-cls="æˆ¦">æˆ¦</button>
        <button class="class-btn" data-cls="å‰£">å‰£</button>
        <button class="class-btn" data-cls="æ§">æ§</button>
        <button class="class-btn" data-cls="å¹»">å¹»</button>
        <button class="class-btn" data-cls="è–">è–</button>
        <button class="class-btn" data-cls="é—˜">é—˜</button> <!-- ãƒ•ã‚¡ã‚¤ã‚¿ãƒ¼fighter -->
 <!-- ã‚¹ã‚­ãƒ«ä¸€è¦§ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ -->
        <label><input type="radio" name="matchType" value="only" checked> å®Œå…¨ä¸€è‡´</label>
        <label><input type="radio" name="matchType" value="includes"> éƒ¨åˆ†ä¸€è‡´</label>
    </div>
<!-- æŠ€è¡“ãƒ»é­”æ³•ä¸€è¦§ã®è¡¨ç¤ºå ´æ‰€ â†“-->    
    <div id="result">
    </div>
<!-- æŠ€è¡“ãƒ»é­”æ³•ä¸€è¦§ã®è¡¨ç¤ºå ´æ‰€ â†‘-->    
<!-- è„šæ³¨ãƒ»æ¨©åˆ©è¡¨è¨˜ -->
    <div class="footer-text">
        <footer role="contentinfo">
            <section lang="ja">
                <h5 class="sr-only">è‘—ä½œæ¨©æƒ…å ±</h5>
                <small>å½“ã‚µã‚¤ãƒˆã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒªãƒãƒ¼ã‚¸ãƒ¥ã®ç”»åƒãƒ»BGMåŠã³ãã®ä»–ã®è¡¨ç¾ç‰©ã®æ¨©åˆ©ã¯ä¸‹è¨˜ã®ã¨ãŠã‚Šæ¨©åˆ©è€…ã«å¸°å±ã—ã¾ã™ï¼š</small>
            </section>
            <section lang="en">
                <h5 class="sr-only">Copyright notice</h5>
                <small>Lineage and Lineage Eternal Life are registered trademarks of NCsoft Corporation.&copy;  1998-2011 Copyright NCsoft Corporation. NC Japan K.K. was granted by NCsoft Corporation the right to publish, distribute, and transmit Lineage Eternal Life in Japan. All Rights Reserved.</small>
            </section>
            <section lang="zh-TW">
                <h5 class="sr-only">ç‰ˆæƒå£°æ˜</h5>
                <small>æœ¬é é¢ä½¿ç”¨ä¹‹ã€ŠLineageã€‹ç›¸é—œç´ æï¼Œå…¶ç‰ˆæ¬Šçš†å±¬åŸå‰µä½œè€…æ‰€æœ‰ã€‚</small>
            </section>
        </footer>
    </div>
<!-- ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹ãƒœã‚¿ãƒ³ -->
<p>
    <a href="#top" class="btn-pagetop" aria-label="ãƒšãƒ¼ã‚¸ã®å…ˆé ­ã¸æˆ»ã‚‹">
        <i class="fa fa-arrow-up fa-2x" aria-hidden="true"></i>
        <span class="label-text">ãƒšãƒ¼ã‚¸å…ˆé ­ã¸</span>
    </a>
</p>
<!-- FC2ã§ã¯application/scriptã§ã‚‚jsãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿æ™‚ã«text/htmlã«å¤‰æ›´ã•ã‚Œé§†å‹•ã—ãªã„ã€‚Javascriptä¸­ã«htmlã‚¿ã‚°ã§é–‹å§‹ã•ã‚Œã‚‹è¡ŒãŒã‚ã‚‹å ´åˆèª¤èªã•ã‚Œã‚‹ã€‚
å¯¾ç­–ï¼šå…¨ã¦ã®è¡Œã¯html_pcv =+`ï½ã§ã¯ã˜ã‚ã‚‹ã“ã¨ã€‚ã¾ãŸã¯jsç‹¬ç«‹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚ãã‚‰ã‚ã‚‹ã€‚ -->
<!--    <script src="lineage_skill.js" defer></script> -->
<script>
    let html_pcv = ''; // PCç”¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ ¼ç´ç”¨
    let html_spv = ''; // ã‚¹ãƒãƒ›ç”¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ ¼ç´ç”¨*æœªå®Ÿè£…
// ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èª­ã¿è¾¼ã¿ã‚’å¾…ã¤ãŸã‚ã®DOMContentLoadedã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    document.addEventListener('DOMContentLoaded', function() {
        console.log("DOMèª­ã¿è¾¼ã¿å®Œäº†");
    });
// document.getElementById('fileInput').addEventListener('change', function(e) {
//ã‚¹ãƒãƒ›ã§ã¯ç„¡ç†ã ã‹ã‚‰TSVé¸æŠã¯ã•ã›ãªã„ã€‚TSVãƒ•ã‚¡ã‚¤ãƒ«åã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€‚
document.getElementById('loadBtn').addEventListener('click', function () {
    // è‹±æ–‡ãƒ»æ—¥æœ¬èªã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å‘ã‘èª¬æ˜ã‚’éè¡¨ç¤ºã«
    const info_en = document.getElementById("screenreader-info");
    const info_jp = document.getElementById("screenreader-info_jp");

    if (!info_en.classList.contains("sr-only")) {
        info_en.classList.add("sr-only");
    }
    if (!info_jp.classList.contains("sr-only")) {
        info_jp.classList.add("sr-only");
    }

    // å‘ŠçŸ¥æ–‡ã‚’éè¡¨ç¤ºã«
    const notice = document.getElementById("notice");
    if (notice) {
        notice.style.display = "none";
    }

    // urlæƒé™¤ã€‚ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã‚’ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦å‡¦ç†ã™ã‚‹ã®ã¯å®¿é¡Œã€‚ä»Šã¯è¡¨ç¤ºãƒœã‚¿ãƒ³ãŒãƒˆãƒªã‚¬ãƒ¼ã€‚
// è¡¨ç¤ºã•ã‚Œã¦ã„ãªã„çŠ¶æ…‹ãªã®ã« #class=xxx ãŒã‚ã‚‹ãªã‚‰ãƒãƒƒã‚·ãƒ¥ã‚’æ¶ˆã™
    if (!document.getElementById('result').innerHTML && location.hash.includes("class=")) {
        history.replaceState(null, null, location.pathname);
    }
// TSVèª­ã¿è¾¼ã¿ã¨æç”» ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’é™„ä¸ã—ãŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã‚ˆã‚‹å¼·åˆ¶å†èª­ã¿è¾¼ã¿ã«ã‚ˆã£ã¦ã€FC2Serverã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯¿å‘½ã‚’å›é¿ã€‚
    fetch('LineageREMASTER_skill3.tsv?v=' + new Date().getTime())
        .then(response => response.text())
        .then(text => {
//testç”¨
// èª­ã¿è¾¼ã¿æˆåŠŸæ™‚ã®å‡¦ç†
console.log("ã‚¹ã‚¯ãƒªãƒ—ãƒˆé–‹å§‹");
console.log("DOMèª­ã¿è¾¼ã¿å¾…æ©Ÿä¸­");

function setup() {
  console.log("setupé–‹å§‹");

  const btn = document.getElementById('loadBtn');
  if (btn) {
    console.log("ãƒœã‚¿ãƒ³å–å¾—æˆåŠŸ");
    btn.addEventListener('click', () => {
      console.log("ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯");
      fetch('LineageREMASTER_skill3.tsv?v=' + new Date().getTime())
        .then(response => {
          if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
          return response.text();
        })
        .then(text => {
          console.log("èª­ã¿è¾¼ã¿æˆåŠŸ");
          document.getElementById('result').innerHTML = html_pcv;
//        document.getElementById('result').textContent = text;

//      DOMæ§‹ç¯‰å¾Œã«åˆæœŸåŒ–å‡¦ç†ã‚’ç¢ºå®Ÿã«å®Ÿè¡Œ
        requestAnimationFrame(() => {
            initializeTableBehavior();
        });

        })
        .catch(error => {
          console.error("èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:", error);
        });
    });
  } else {
    console.log("loadBtn è¦‹ã¤ã‹ã‚‰ãš");
  }
}
// DOMContentLoaded ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ã€DOMã®èª­ã¿è¾¼ã¿å®Œäº†ã‚’å¾…ã¤
if (document.readyState === 'loading') {
  console.log("DOMèª­ã¿è¾¼ã¿å¾…æ©Ÿä¸­");
  document.addEventListener('DOMContentLoaded', setup);
} else {
  console.log("DOMã™ã§ã«æ§‹ç¯‰æ¸ˆã¿ã€å³æ™‚å®Ÿè¡Œ");
  setup();
}
    // [è¡¨ç¤º]ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–ï¼‹ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆ
    const loadBtn = document.getElementById("loadBtn");
    if (loadBtn) {
        loadBtn.disabled = true;
        loadBtn.style.opacity = "0.5";
        loadBtn.style.cursor = "not-allowed";
        loadBtn.title = "ã‚¯ãƒ©ã‚¹é¸æŠæ™‚ã«è‡ªå‹•è¡¨ç¤ºã•ã‚Œã‚‹ãŸã‚ã€ã“ã®ãƒœã‚¿ãƒ³ã¯ä¸è¦ã§ã™ã€‚";
    }
// ã“ã“ã«TSVãƒ‘ãƒ¼ã‚¹ï¼†è¡¨ç¤ºå‡¦ç†ã‚’æ›¸ã
        const lines = text.trim().split('\n');
        let html_pcv = `<table>`;
        for (const line of lines) {
            const fields = line.split('\t');
            console.log(`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ•°(${line}):`, fields.length); // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ•°ã‚’ç¢ºèª

            if (fields.length < 25) {
                console.warn("ãƒ‡ãƒ¼ã‚¿ä¸è¶³:", fields);
                continue; // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ•°ãŒä¸è¶³ã—ã¦ã„ã‚‹å ´åˆã‚¹ã‚­ãƒƒãƒ—
            }
// å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‚’å¤‰æ•°ã«æ ¼ç´
            const [no,img,level,name,cls,elf,active,type,align,mp,hp,material,gear,duration,target,reuse,effect,acqLv,obtain,price,Droporigin,Dropcomp,note1,note2,EOR] = line.split('\t');
            // å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’TABåˆ†å‰² EOR(End Of Record)ã‚’ç„¡è¦–
            // imgã¯ç”»åƒã®URLã ãŒã€ã“ã“ã§ã¯ä½¿ç”¨ã—ãªã„ã®ã§ç„¡è¦–ã€‚å€¤ã¯"å…¨è§’Space"
            // EORã¯è¡Œã®çµ‚ã‚ã‚Šã‚’ç¤ºã™ãŒã€ã“ã“ã§ã¯ä½¿ç”¨ã—ãªã„ã®ã§ç„¡è¦–ã€‚å€¤ã¯"â– "

            // clsã¨elfã®ã¾ã¨ã‚è¡¨ç¤º
            let clsDisplay = cls;
            if (cls === "å¦–" && elf) {
                clsDisplay += `ï¼ˆ${elf}ï¼‰`;
            }
            if (window.innerWidth <= 438) {
// #region sauce
//  --- ã‚¹ãƒãƒ›ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«å‡ºåŠ› ---
            // ç­‰ç´šãƒ»ã‚¹ã‚­ãƒ«ãƒ¬ãƒ™ãƒ«ã®å‡ºåŠ›éƒ¨åˆ†
            let lvDisplay ="";
            if (/^\d+$/.test(level)) {
            // æ•°å­—ã®ã¿ã®å ´åˆ
                lvDisplay += `Lv.${level}`;
            } else {
            // ç©ºã¾ãŸã¯æ–‡å­—åˆ—ï¼ˆç¥è©±ãƒ»ä¼èª¬ãªã©ï¼‰ã®å ´åˆ
                lvDisplay += `${level}`;
            }
            html_pcv += `<tbody class="record-table" data-cls="${cls}" data-elf="${elf}">`  // 1ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒ1tbodyã§341å€‹(2025/07/07æ™‚ç‚¹)ï½ã‚ã‚‹
            html_pcv += `<tr class="spv-layout record-title"><td class="spv-col-data_no">No.${no}</td><td class="spv-col-data_skillname">${lvDisplay}ã€€${name}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">ç¿’å¾—ã‚¯ãƒ©ã‚¹</th><td class="spv-col-data">${clsDisplay}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">æ´»æ€§</th><td class="spv-col-data">${active}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">ç¨®é¡</th><td class="spv-col-data">${type}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">æ€§å‘</th><td class="spv-col-data">${align}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">æ¶ˆè€—MP</th><td class="spv-col-data">${mp}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">æ¶ˆè€—HP</th><td class="spv-col-data">${hp}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">ææ–™ãƒ»è§¦åª’</th><td class="spv-col-data">${material}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">è£…å‚™æ¡ä»¶</th><td class="spv-col-data">${gear}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">æŒç¶šæ™‚é–“</th><td class="spv-col-data">${duration}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">å¯¾è±¡</th><td class="spv-col-data">${target}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">å†ä½¿ç”¨æ™‚é–“</th><td class="spv-col-data">${reuse}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">åŠ¹æœãƒ»æ€§èƒ½</th><td class="spv-col-data">${effect}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">ç¿’å¾—Lv.</th><td class="spv-col-data">${acqLv}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">å–å¾—æ–¹æ³•</th><td class="spv-col-data">${obtain}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">ä¾¡æ ¼</th><td class="spv-col-data">${price}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">ãƒ‰ãƒ­ãƒƒãƒ—</th><td class="spv-col-data">${Droporigin}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">ã€è˜‡ç”Ÿã€‘</th><td class="spv-col-data">${Dropcomp}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">å‚™è€ƒ1</th><td class="spv-col-data">${note1}</td></tr>`;
            html_pcv += `<tr><th class="spv-col-header">å‚™è€ƒ2</th><td class="spv-col-data">${note2}</td></tr>`;
            html_pcv += `</tbody>`;
            } else {
// #endregion
//  --- PCç”¨ãƒ†ãƒ¼ãƒ–ãƒ«å‡ºåŠ› ---
            html_pcv += `<tbody class="record-table" data-cls=${cls} data-elf=${elf}>`
            // No.ã¨Levelã¨ã‚¹ã‚­ãƒ«åã¯ã€Œ<th>ï½ã€ã‚’ä½¿ç”¨ã—ãªã„ã€‚1+1+9=11åˆ—ã€‚
                html_pcv += `<tr class="record-title">
                            <td class="col-data_no">No.${no}</td>`
                // ...existing code...
                // ç­‰ç´šãƒ»ã‚¹ã‚­ãƒ«ãƒ¬ãƒ™ãƒ«ã®å‡ºåŠ›éƒ¨åˆ†
                            if (/^\d+$/.test(level)) {
                    // æ•°å­—ã®ã¿ã®å ´åˆ
                                html_pcv += `<td class="col-data_level">Lv.${level}</td>`;
                            } else {
                    // ç©ºã¾ãŸã¯æ–‡å­—åˆ—ï¼ˆç¥è©±ãƒ»ä¼èª¬ãªã©ï¼‰ã®å ´åˆ
                                html_pcv += `<td class="col-data_level">${level}</td>`;
                            }   
                    html_pcv += `<td class="col-data_skillname" colspan="9">${name}</td>
                        </tr></tbody></table>`
            // skill_domain_eligible_character:5åˆ—
            // skill_domain_tendency:2+2+2=6åˆ—
                html_pcv += `<table><tbody class="record-table" data-cls=${cls}><tr>
                            <th class="col-header">ç¿’å¾—ã‚¯ãƒ©ã‚¹</th><td class="col-data" colspan="4">${clsDisplay}</td>`
                html_pcv += `<th class="col-header">æ´»æ€§</th><td class="col-data">${active}</td>
                            <th class="col-header">ç¨®é¡</th><td class="col-data">${type}</td>
                            <th class="col-header">æ€§å‘</th><td class="col-data">${align}</td>
                        </tr></tbody></table>`
            // skill_domain_resource:2+2+3+2+2=11åˆ—
                html_pcv += `<table><tbody class="record-table" data-cls=${cls}><tr>
                            <th class="col-header">æ¶ˆè€—MP</th><td class="col-data">${mp}</td>
                            <th class="col-header">æ¶ˆè€—HP</th><td class="col-data">${hp}</td>
                            <th class="col-header">ææ–™ãƒ»è§¦åª’</th><td class="col-data" colspan="2">${material}</td>
                            <th class="col-header">è£…å‚™æ¡ä»¶</th><td class="col-data">${gear}</td>
                            <th class="col-header">æŒç¶šæ™‚é–“</th><td class="col-data">${duration}</td>
                        </tr></tbody></table>`
            // skill_domain_effect:3+2+6=11åˆ—
                html_pcv += `<table><tbody class="record-table" data-cls=${cls}><tr>
                            <th class="col-header">å¯¾è±¡</th><td class="col-data" colspan="2">${target}</td>
                            <th class="col-header">å†ä½¿ç”¨æ™‚é–“</th><td class="col-data">${reuse}</td>
                            <th class="col-header">åŠ¹æœãƒ»æ€§èƒ½</th><td class="col-data" colspan="5">${effect}</td>
                        </tr></tbody></table>`
            // skill_domain_acquisition:2+3+6=11åˆ—
                html_pcv += `<table><tbody class="record-table" data-cls=${cls}><tr>
                            <th class="col-header">ç¿’å¾—Lv.</th><td class="col-data">${acqLv}</td>
                            <th class="col-header">å–å¾—æ–¹æ³•</th><td class="col-data" colspan="2">${obtain}</td>
                            <th class="col-header">ä¾¡æ ¼</th><td class="col-data" colspan="5">${price}</td>
                        </tr></tbody></table>`
            // skill_domain_dropmob:11åˆ—
                html_pcv += `<table><tbody class="record-table" data-cls=${cls}><tr>
                            <th class="col-header">ãƒ‰ãƒ­ãƒƒãƒ—</th><td class="col-data" colspan="11">${Droporigin}</td>
                        </tr></tbody></table>`
            // skill_domain_dropmob:11åˆ—
                html_pcv += `<table><tbody class="record-table" data-cls=${cls}><tr>
                            <th class="col-header">ã€è˜‡ç”Ÿã€‘</th><td class="col-data" colspan="11">${Dropcomp}</td>
                        </tr></tbody></table>`
            // skill_domain_notes:6+5=11åˆ—
                html_pcv += `<table><tbody><tr>
                            <th class="col-header">å‚™è€ƒ1</th><td class="col-data" colspan="5">${note1}</td>
                            <th class="col-header">å‚™è€ƒ2</th><td class="col-data" colspan="4">${note2}</td>
                        </tr>`
            }
            html_pcv +=`</tbody>`;
        }
        html_pcv += `</table>`;
        document.getElementById('result').innerHTML = html_pcv;
// ãƒ†ãƒ¼ãƒ–ãƒ«æç”»å¾Œ
// ã‚¯ãƒ©ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®åˆæœŸåŒ–
        document.querySelectorAll('.class-btn').forEach(btn => {
            btn.classList.remove('active'); // ã™ã¹ã¦ã®ãƒœã‚¿ãƒ³ã‹ã‚‰ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
        });
// åˆæœŸçŠ¶æ…‹ã§ã€Œallã€ãƒœã‚¿ãƒ³ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
document.querySelector('.class-btn[data-cls="all"]').classList.add('active');
// tbodyã”ã¨ã«åˆæœŸè¡¨ç¤ºã‚’è¨­å®šï¼ˆrecord-titleã®ã¿è¡¨ç¤ºï¼‰
document.querySelectorAll('tbody.record-table').forEach(tbody => {
    const isTarget = tbody.dataset.cls === 'all';
    tbody.dataset.collapsed = isTarget ? 'false' : 'true';
// å„ã‚¯ãƒ©ã‚¹æ¯ã®è¡¨ç¤ºéè¡¨ç¤ºåˆ¤å®šã¯ï¼Ÿ
    console.log(`tbody ${tbody.dataset.cls} â†’ collapsed=${tbody.dataset.collapsed}`);

    tbody.querySelectorAll('tr').forEach(tr => {
        const isTitle = tr.classList.contains('record-title');
        tr.style.display = (isTarget || isTitle) ? '' : 'none';
// isTitle=trueï¼Ÿãã‚Œã¨ã‚‚record-titleã§ãªã„è¡ŒãŒtrueãªã®ï¼Ÿ
        const text = tr.textContent.trim().slice(0, 10);
        console.log(`tr: "${text}", isTitle: ${isTitle}`);
    });
});
// å„ãƒœã‚¿ãƒ³ã«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
document.querySelectorAll('.class-btn').forEach(btn => {
    btn.addEventListener('click', function () {
        // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã®åˆ‡ã‚Šæ›¿ãˆ
        document.querySelectorAll('.class-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        const selectedCls = this.dataset.cls;
        const selectedElf = this.dataset.elf || '';
        const matchType = document.querySelector('input[name="matchType"]:checked').value;
        // tbodyã”ã¨ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
        document.querySelectorAll('tbody.record-table').forEach(tbody => {
            const cls = tbody.dataset.cls || '';
            const elf = tbody.dataset.elf || '';
        // åˆæœŸå€¤isMatchã¯falseï¼éè¡¨ç¤º
            let isMatch = false;
            if (selectedCls === 'all') {
                isMatch = true;
        // ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®é¸æŠçŠ¶æ…‹
            } else if (matchType === 'only') {
        // å®Œå…¨ä¸€è‡´ãƒ¢ãƒ¼ãƒ‰
                if (selectedCls === 'å¦–') {
                    isMatch =
                        (cls === 'å¦–') &&
                        (elf === selectedElf || elf === 'å…±');
                } else {
                    isMatch = cls === selectedCls;
                }
            } else {
        // éƒ¨åˆ†ä¸€è‡´ãƒ¢ãƒ¼ãƒ‰
                if (selectedCls === 'å¦–') {
                    isMatch =
                        cls.includes('å¦–') &&
                        (elf === selectedElf || elf === 'å…±');
                } else {
                    isMatch = cls.includes(selectedCls);
                }
            }
            tbody.dataset.collapsed = 'true'; // æ—¢å®šï¼šæŠ˜ã‚ŠãŸãŸã¿
            tbody.querySelectorAll('tr').forEach(tr => {
                    // ä¸€è‡´ã™ã‚‹ã‚¯ãƒ©ã‚¹ã®ã¿è¡¨ç¤ºã€ãã†ã§ãªã‘ã‚Œã°å®Œå…¨éè¡¨ç¤º
                const isTitle = tr.classList.contains('record-title');
                tr.style.display = isMatch && isTitle ? '' : 'none';
            });
        });
    });
});
// ã‚¿ã‚¤ãƒˆãƒ«è¡Œã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼æŠ˜ã‚ŠãŸãŸã¿åˆ‡ã‚Šæ›¿ãˆ
document.querySelectorAll('tr.record-title').forEach(titleRow => {
    titleRow.addEventListener('click', function () {
        const tbody = this.closest('tbody');
        const isCollapsed = tbody.dataset.collapsed === 'true';

        tbody.dataset.collapsed = isCollapsed ? 'false' : 'true';

        tbody.querySelectorAll('tr').forEach(tr => {
            const isTitle = tr.classList.contains('record-title');
            tr.style.display = isCollapsed || isTitle ? '' : 'none';
        });
    });
});
// ã‚¯ãƒ©ã‚¹ã‚³ãƒ¼ãƒ‰ãƒãƒƒãƒ—(urlç”¨/æ•°å­—ã¯å…¬å¼webãƒšãƒ¼ã‚¸ã®ClassID)
const classCodeMap = {
//  "å…¨": "all"   //-/å…¨ã‚¯ãƒ©ã‚¹allã‚¯ãƒ©ã‚¹ã¨ã—ã¦è¨­å®šã—ãªã„ã€‚æœªå®šç¾©ã¨ã—ã¦å…¨ä»¶è¡¨ç¤ºæ‰±ã„ã€‚
  "å›": "pri",  //0/å›ä¸»princeãƒ»princess
  "é¨": "kni",  //1/ãƒŠã‚¤ãƒˆknight
  "å¦–": "elf",  //2/ã‚¨ãƒ«ãƒ•elf
  "é­”": "wiz",  //3/ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰wizard
  "é—‡": "dak",  //4/ãƒ€ãƒ¼ã‚¯ã‚¨ãƒ«ãƒ•darkelf
  "ç«œ": "dra",  //5/ãƒ‰ãƒ©ã‚´ãƒ³ãƒŠã‚¤ãƒˆdragonknight
  "å¹»": "ill",  //6/ã‚¤ãƒªãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ‹ã‚¹ãƒˆillusionist
  "æˆ¦": "war",  //7/ã‚¦ã‚©ãƒªã‚¢ãƒ¼warrior
  "å‰£": "fen",  //8/ãƒ•ã‚§ãƒ³ã‚µãƒ¼Fencer
  "æ§": "lan",  //9/ãƒ©ãƒ³ã‚µãƒ¼lancer
  "è–": "Pal",  //10/ãƒ‘ãƒ©ãƒ‡ã‚£ãƒ³Paladin
  "é—˜": "fig"   //11/ãƒ•ã‚¡ã‚¤ã‚¿ãƒ¼fighter
};
// ã‚¯ãƒ©ã‚¹ã‚³ãƒ¼ãƒ‰å–å¾—é–¢æ•°
function getClassCode(label) {
  return classCodeMap[label] || "all"; // æœªå®šç¾©ãªã‚‰ä»®ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
}// ã‚¯ãƒ©ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°é–¢æ•°
document.querySelectorAll('.class-btn').forEach(btn => {
    btn.addEventListener('click', function () {
        const label = this.dataset.cls; // ãŸã¨ãˆã° "è–"
        const code = getClassCode(label); // ãŸã¨ãˆã° "hol"
        history.replaceState(null, null, `#class=${code}`);
//        filterByClass(code); // æ—¢å­˜ã®æ³¨å‡ºé–¢æ•°
    });
});
    // reader.readAsText(e.target.files[0], 'UTF-8');
    // console.log(text); // ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ»341ä»¶24ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯å†—é•·ã€‚
        })
        .catch(error => {
            document.getElementById('result').textContent = 'èª­ã¿è¾¼ã¿å¤±æ•—: ' + error;
        });
    // ã“ã“ã§addEventListenerã®é–¢æ•°ã‚’é–‰ã˜ã‚‹

// ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®å†ç™»éŒ²ã‚’å«ã‚ãŸåˆæœŸåŒ–é–¢æ•°â†“ã“ã“ã‹ã‚‰
function initializeTableBehavior() {
  console.log("ğŸ” initializeTableBehavior å®Ÿè¡Œ");
  document.querySelectorAll('tbody.record-table').forEach(tbody => {
    const isTarget = tbody.dataset.cls === 'all';
    tbody.dataset.collapsed = isTarget ? 'false' : 'true';
    console.log(`tbody ${tbody.dataset.cls} â†’ collapsed=${tbody.dataset.collapsed}`);
    tbody.querySelectorAll('tr').forEach(tr => {
      const isTitle = tr.classList.contains('record-title');
      tr.style.display = (isTarget || isTitle) ? '' : 'none';
    });
  });
  document.querySelectorAll('tr.record-title').forEach(titleRow => {
    titleRow.addEventListener('click', function () {
      const tbody = this.closest('tbody');
      const isCollapsed = tbody.dataset.collapsed === 'true';
      tbody.dataset.collapsed = isCollapsed ? 'false' : 'true';
      console.log(`ãƒˆã‚°ãƒ«: ${tbody.dataset.cls} â†’ ${tbody.dataset.collapsed}`);
      tbody.querySelectorAll('tr').forEach(tr => {
        const isTitle = tr.classList.contains('record-title');
        tr.style.display = isCollapsed || isTitle ? '' : 'none';
      });
    });
  });
}
// ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®å†ç™»éŒ²ã‚’å«ã‚ãŸåˆæœŸåŒ–é–¢æ•°â†‘ã“ã“ã¾ã§

});
// ç”»é¢ä¸Šéƒ¨ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹ãƒœã‚¿ãƒ³
$(function() {
    var pageTop = $('.btn-pagetop');
    pageTop.hide();
    $(window).scroll(function() {
        if ($(this).scrollTop() > 600) {
            pageTop.fadeIn();
        } else {
            pageTop.fadeOut();
        }
    });
    pageTop.click(function() {
        $('body, html').animate({
            scrollTop: 0
        }, 500, 'swing');
        pageTop.blur();
        return false;
    });
});
function scrollToFirstRecord() {
  var table = document.querySelector("table");
  var tbody = table.getElementsByTagName("tbody")[0];
  var firstRow = tbody.getElementsByTagName("tr")[0];
  firstRow.scrollIntoView({ behavior: 'smooth', block: 'start' });
  // ãƒ˜ãƒƒãƒ€ãƒ¼ã®é«˜ã•ã‚’å–å¾—
  var headerHeight = table.querySelector("thead.sticky").offsetHeight; //80pxã‚’å–å¾—Edgeã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚ˆã‚Šç¢ºèª
  // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ã‚’èª¿æ•´ã—ã¦1ä»¶ç›®ã®è¡ŒãŒè¦‹ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹
  var firstRowTop = firstRow.getBoundingClientRect().top - document.body.getBoundingClientRect().top;
  window.scrollTo({ top: firstRowTop - headerHeight, behavior: 'smooth' });
}
</script>
</body>
</html>